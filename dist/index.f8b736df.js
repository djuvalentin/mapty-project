function t(t,e,o,s){Object.defineProperty(t,e,{get:o,set:s,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},r={},n=o.parcelRequire7e89;null==n&&((n=function(t){if(t in s)return s[t].exports;if(t in r){var e=r[t];delete r[t];var o={id:t,exports:{}};return s[t]=o,e.call(o.exports,o,o.exports),o.exports}var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){r[t]=e},o.parcelRequire7e89=n),n.register("27Lyk",(function(e,o){var s,r;t(e.exports,"register",(()=>s),(t=>s=t)),t(e.exports,"resolve",(()=>r),(t=>r=t));var n={};s=function(t){for(var e=Object.keys(t),o=0;o<e.length;o++)n[e[o]]=t[e[o]]},r=function(t){var e=n[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),n("27Lyk").register(JSON.parse('{"5SCbD":"index.f8b736df.js","eGCQQ":"trash-2.b4d6008a.svg","fbstj":"edit.a3589e62.svg"}'));var i;i=new URL(n("27Lyk").resolve("eGCQQ"),import.meta.url).toString();var a;a=new URL(n("27Lyk").resolve("fbstj"),import.meta.url).toString(),console.log(e(i));const l=["January","February","March","April","May","June","July","August","September","October","November","December"],c=document.querySelector(".form"),d=document.querySelector(".workouts"),u=document.querySelector(".form__input--type"),p=document.querySelector(".form__input--distance"),h=document.querySelector(".form__input--duration"),m=document.querySelector(".form__input--cadence"),k=document.querySelector(".form__input--elevation"),g=document.querySelector(".prompt--delete_all"),v=document.querySelector(".sort_clear__btns"),_=document.querySelector(".btn--delete_all"),w=document.querySelector(".btn--sort");class y{#t=new Date;id=(Date.now()+"").slice(-10);type;description;constructor(t,e){this.distance=t,this.duration=e}get date(){return this.#t}setDescription(t=this.#t){return`${this.type[0].toUpperCase()+this.type.slice(1)} on ${l[t.getMonth()]} ${t.getDate()}`}}class b extends y{pace;constructor(t,e,o){super(t,e),this.type="running",this.description=this.setDescription(),this.cadence=o,this.pace=this.calcPace()}calcPace(){return this.duration/this.distance}}class f extends y{speed;constructor(t,e,o){super(t,e),this.type="cycling",this.description=this.setDescription(),this.elevation=o,this.speed=this.calcSpeed()}calcSpeed(){return this.distance/(this.duration/60)}}new class{#e=[];#o=[];#s;#r;#n;constructor(){navigator.geolocation.getCurrentPosition(this.#i.bind(this),this.#a),this.#l(),this.#c(),this.#e.length>1&&this.#d(),c.addEventListener("submit",this.#u.bind(this)),u.addEventListener("change",this.#p),d.addEventListener("mouseover",this.#h.bind(this)),d.addEventListener("mouseout",this.#m.bind(this)),d.addEventListener("click",this.#k.bind(this)),d.addEventListener("click",this.#g.bind(this)),d.addEventListener("click",this.#v.bind(this)),d.addEventListener("click",this.#_.bind(this)),_.addEventListener("click",this.#w.bind(this)),g.addEventListener("click",this.#y.bind(this)),window.addEventListener("keydown",this.#b.bind(this)),w.addEventListener("click",this.#f.bind(this))}#L(){this.#e.forEach((t=>{this.#W(t)}))}#c(t=this.#e){t.forEach((t=>{this.#S(t)}))}#E(t,e){this.#n=L.map("map").setView([t,e],14),L.tileLayer("https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>'}).addTo(this.#n)}#C(){c.classList.remove("hidden"),p.focus()}#A(t){this.#s=t.latlng.lat,this.#r=t.latlng.lng,this.#D(),this.#C()}#i(t){const{latitude:e,longitude:o}=t.coords;this.#E(e,o),this.#L(),this.#n.on("click",this.#A.bind(this))}#a(){alert("Could not access geolocation, please allow access to your location for this page and reload!")}#F(...t){return t.every((t=>Number.isFinite(t)&&t>0))}#I(t,e){const o=document.createElement("div");o.classList.add("popup"),o.innerHTML=`<span class="popuptext" id="myPopup">${t}</span>`,e.appendChild(o),o.querySelector(".popuptext").classList.add("show")}#M(){alert("Incorrect input. All the values must be positive numbers")}#P(t){t.locationCoords=[this.#s,this.#r]}#q(t){let o=`\n  <li class="workout workout--${t.type}" data-id="${t.id}">\n    <h2 class="workout__title">${t.description}</h2>\n    <div class="workout__btns hidden">\n      <button class="btn btn__edit">\n        <img class="icon--manage__workout" src="${e(a)}" />\n      </button>\n      <button class="btn btn--delete">\n        <img class="icon--manage__workout" src="${e(i)}" />\n      </button>\n    </div>\n    <div class="workout__details">\n      <span class="workout__icon">${"running"===t.type?"üèÉ‚Äç‚ôÇÔ∏è":"üö¥‚Äç‚ôÄÔ∏è"}</span>\n      <span class="workout__value">${t.distance}</span>\n      <span class="workout__unit">km</span>\n    </div>\n    <div class="workout__details">\n      <span class="workout__icon">‚è±</span>\n      <span class="workout__value">${t.duration}</span>\n      <span class="workout__unit">min</span>\n    </div> `;return"running"===t.type&&(o+=`\n    <div class="workout__details">\n      <span class="workout__icon">‚ö°Ô∏è</span>\n      <span class="workout__value">${t.pace.toFixed(2)}</span>\n      <span class="workout__unit">min/km</span>\n    </div>\n    <div class="workout__details">\n      <span class="workout__icon">ü¶∂üèº</span>\n      <span class="workout__value">${t.cadence}</span>\n      <span class="workout__unit">spm</span>\n    </div>\n  </li>`),"cycling"===t.type&&(o+=`\n      <div class="workout__details">\n      <span class="workout__icon">‚ö°Ô∏è</span>\n      <span class="workout__value">${t.speed.toFixed(2)}</span>\n      <span class="workout__unit">km/h</span>\n    </div>\n    <div class="workout__details">\n      <span class="workout__icon">‚õ∞</span>\n      <span class="workout__value">${t.elevation}</span>\n      <span class="workout__unit">m</span>\n    </div>\n  </li>`),o}#S(t){c.insertAdjacentHTML("afterend",this.#q(t))}#O(t,e){e.insertAdjacentHTML("afterend",this.#q(t))}#W(t){const e=L.popup().setContent(`${"running"===t.type?"üèÉ‚Äç‚ôÇÔ∏è":"üö¥‚Äç‚ôÄÔ∏è"} ${t.description}`),o=L.marker(t.locationCoords).addTo(this.#n).bindPopup(e,{maxWidth:300,minWidth:50,autoClose:!1,closeOnClick:!1,className:`${t.type}-popup`}).openPopup();t.marker=o}#$(){p.value="",h.value="",m.value="",k.value=""}#N(){c.style.display="none",c.classList.add("hidden"),setTimeout((function(){c.style.display="grid"}),1e3)}#x(){c.classList.remove("form--update"),this.#$()}#d(){v.classList.remove("hidden")}#T(){v.classList.add("hidden")}#H(t,e,o,s,r){let n;if("running"===t){if(!this.#F(e,o,s))return this.#M();n=new b(e,o,s)}if("cycling"===t){if(!this.#F(e,o)||!Number.isFinite(r))return this.#M();n=new f(e,o,r)}this.#P(n),this.#e.push(n),this.#j(),this.#S(n),this.#W(n),this.#e.length>1&&this.#d()}#B(){this.#o.splice(0,this.#o.length)}#R(t,e,o,s,r){let[n,i]=this.#o;n.distance=e,n.duration=o,n.type!==t?("cycling"===t&&(Object.setPrototypeOf(n,f.prototype),n.elevation=r,n.cadence=null,n.speed=n.calcSpeed(),n.description=n.description.replace("Running","Cycling")),"running"===t&&(Object.setPrototypeOf(n,b.prototype),n.elevation=null,n.cadence=s,n.pace=n.calcPace(),n.description=n.description.replace("Cycling","Running"))):("cycling"===t&&(n.elevation=r,n.speed=n.calcSpeed()),"running"===t&&(n.cadence=s,n.pace=n.calcPace())),n.type=t,this.#B(),this.#O(n,i),this.#j(),i.remove(),c.classList.remove("form--update"),c.dataset.state=t,this.#n.removeLayer(n.marker),n.marker=null,this.#W(n)}#U(t){return!Number.isFinite(+t.value)||+t.value<=0}#J(t){return"running"===t?[p,h,m].filter(this.#U.bind(null)):"cycling"===t?[p,h].filter(this.#U.bind(null)):void 0}#u(t){t.preventDefault();const e=u.value,o=this.#J(e);if(o.length){let t;const e=o[0];return t=""===e.value?"Please fill out the field":"Positive number expected",o.forEach((t=>t.classList.add("wrong__input"))),this.#I(t,e.closest(".form__row")),void e.focus()}const s=+p.value,r=+h.value,n=+m.value,i=+k.value;c.classList.contains("form--update")||this.#H(e,s,r,n,i),c.classList.contains("form--update")&&(this.#R(e,s,r,n,i),c.classList.remove("form--update")),this.#x(),this.#N(),c.dataset.state=e,w.dataset.state="unsorted"}#p(){m.closest(".form__row").classList.toggle("form__row--hidden"),k.closest(".form__row").classList.toggle("form__row--hidden")}#h(t){const e=t.target.closest(".workout");e&&e.querySelector(".workout__btns").classList.remove("hidden")}#m(t){if(t.target.classList.contains("workout")){d.querySelectorAll(".workout__btns").forEach((t=>t.classList.add("hidden")))}}#G(t){return this.#e.find((e=>e.id===t))}#k(t){const e=t.target.closest(".workout");if(!e||t.target.classList.contains("btn"))return;const o=this.#G(e.dataset.id);this.#n.panTo(o.locationCoords,{animate:!0,duration:1})}#Q(t,e){return"marker"==t?void 0:e}#j(){localStorage.setItem("workouts",JSON.stringify(this.#e,this.#Q))}#l(){const t=JSON.parse(localStorage.getItem("workouts"));t&&t.forEach((t=>{let e;"running"===t.type&&(e=Object.create(b.prototype),e.cadence=t.cadence,e.pace=t.pace),"cycling"===t.type&&(e=Object.create(f.prototype),e.elevation=t.elevation,e.speed=t.speed),e.id=t.id,e.type=t.type,e.description=t.description,e.distance=t.distance,e.duration=t.duration,e.locationCoords=t.locationCoords,this.#e.push(e)}))}#K(){document.querySelectorAll(".workout").forEach((t=>t.classList.remove("hidden")))}#z(t,e,o){return e&&t.target.closest(".btn")&&t.target.closest(".btn").classList.contains(o)}#g(t){const e=t.target.closest(".workout");if(!this.#z(t,e,"btn__edit"))return;this.#D();const o=this.#G(e.dataset.id);this.#K(),e.classList.add("hidden"),this.#C(),o.type!==c.dataset.state&&this.#p(),p.value=o.distance,h.value=o.duration,"running"===o.type&&(u.options[0].selected=!0,m.value=o.cadence),"cycling"===o.type&&(u.options[1].selected=!0,k.value=o.elevation),c.classList.add("form--update"),c.dataset.state=o.type,this.#o.push(o,e)}removeWorkouts(){localStorage.removeItem("workouts"),location.reload()}get workouts(){return this.#e}#V(){g.classList.toggle("hidden")}#w(){this.#e.length&&(this.#D(),[...d.children].forEach((t=>t.classList.add("hidden"))),this.#V())}#Y(){g.classList.add("hidden")}#D(){this.#x(),this.#K(),this.#B(),this.#X(),this.#Y()}#Z(){document.querySelectorAll(".workout").forEach((t=>t.remove()))}#y(t){const e=t.target.closest(".prompt__btn");e&&("yes"===e.dataset.type&&(this.#Z(),this.#e.forEach((t=>this.#n.removeLayer(t.marker))),this.#e.splice(0,this.#e.length),localStorage.removeItem("workouts"),this.#V(),this.#T()),"no"===e.dataset.type&&this.#D())}#X(){const t=document.querySelector(".prompt--delete");return t&&t.remove()}#b(t){"Escape"===t.key&&(this.#N(),this.#D())}#tt(t,e){const o=`\n    <li class="prompt prompt--delete">\n    <h2 class="prompt__question">\n      Are you sure you want to delete ${t.description}?\n    </h2>\n    <div class="prompt__btns">\n      <button\n        class="btn prompt__btn prompt__btn--delete"\n        data-type="yes"\n      >\n        Yes\n      </button>\n      <button\n        class="btn prompt__btn prompt__btn--delete"\n        data-type="no"\n      >\n        No\n      </button>\n        </div>\n      </li>`;e.insertAdjacentHTML("afterEnd",o)}#v(t){const e=t.target.closest(".workout");if(!this.#z(t,e,"btn--delete"))return;const o=this.#G(e.dataset.id);this.#N(),this.#D(),e.classList.toggle("hidden"),this.#tt(o,e),this.#o.push(o,e)}#_(t){const e=t.target.closest(".prompt__btn--delete");if(!e)return;const[o,s]=this.#o;"yes"===e.dataset.type&&(this.#n.removeLayer(o.marker),this.#e.splice(this.#e.indexOf(o),1),this.#j(),s.remove(),this.#B(),document.querySelector(".prompt--delete").remove(),this.#e.length<2&&this.#T()),"no"===e.dataset.type&&this.#D()}#f(t){if(!this.#e.length)return;const e=t.target;if(this.#D(),this.#N(),this.#Z(),"unsorted"===e.dataset.state){const t=[...this.#e].sort(((t,e)=>e.distance-t.distance));this.#c(t)}"sorted"===e.dataset.state&&this.#c(),e.dataset.state="unsorted"===e.dataset.state?"sorted":"unsorted"}};
//# sourceMappingURL=index.f8b736df.js.map
